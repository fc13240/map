<!DOCTYPE html> 
<html> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
<meta name="keywords" content="天地图"/> 
<title>天地图－地图API－范例－叠加其它wms服务图层</title> 
<script type="text/javascript" language="javascript" src="http://api.tianditu.com/js/maps.js"></script> 
<script language="javascript"> 
	var map; 
	var zoom = 6; 
	var wmsLayer; 
	function onLoad() 
	{ 
		var config = { 
			projection: "EPSG:4326" 
		} 
		//初始化地图对象 
	   	map=new TMap("mapDiv",config); 
	   	//设置显示地图的中心点和级别 
		map.centerAndZoom(new TLngLat(116.40969,39.89945),zoom); 
		//允许鼠标滚轮缩放地图 
		map.enableHandleMouseScroll(); 
		//设置地图显示为卫星 
	    map.setMapType(TMAP_SATELLITE_MAP); 
	} 
	 
	function getWMS(layers,url,config) 
	{ 
		if(wmsLayer) 
		{ 
			map.removeLayer(wmsLayer); 
		} 
	    //创建WMS图层对象 
	    wmsLayer = new TTileLayerWMS("layers",url,config); 
	    //将WMS图层添加到地图上 
	    map.addLayer(wmsLayer); 
	} 
	 
	function addSuperMapLayer(layers,url) 
	{ 
		var config = { 
	    	REQUEST:"GetMap",	//操作名称 
	    	VERSION:"1.1.1",	//请求服务的版本 
	    	SERVICE:"WMS",		//服务类型标识符 
	    	LAYERS:layers, 
	    	TRANSPARENT:true,	//输出图像背景是否透明 
	    	STYLES:"",			//每个请求图层的用","分隔的描述样式 
	    	FORMAT:"image/png",	//输出图像的类型 
	    	SRS:map.getCode(),	//地图投影类型 
	    	WIDTH:256,			//输出地图图片的像素宽 
	    	HEIGHT:256			//输出地图图片的像素高 
	    }; 
		getWMS(layers,url,config); 
	} 
	 
</script> 
</head> 
<body onLoad="onLoad()"> 
	<div id="mapDiv" style="position:absolute;width:800px; height:600px"></div> 
	<div id="imgObj" style="position:absolute;top:450px; border:1px; border-color:#000000; width:1000px;height:600px"></div> 
	<div style="position:absolute;left:820px;"> 
		<input type="button" value="叠加超图WMS服务图层" onClick="addSuperMapLayer('China','http://support.supermap.com:8090/iserver/services/map-china400/wms111/China')"/> 
		<input type="button" value="删除超图WMS服务图层" onClick="map.removeLayer(wmsLayer);"/> 
		<br/> 
		超图的WMS服务地址：http://support.supermap.com:8090/iserver/services/map-china400/wms111/China 
		<ul> 
			<li>本示例演示如何叠加其它WMS服务图层。</li> 
			<p><a href="../example.html">返回所有范例列表</a></p> 
		</ul> 
	</div> 
</body> 
</html>