!function(){function n(n){n=n||{};var t=!1,o=null,e=function(){var t=window.innerWidth+(n.extraWidth||0),e=window.innerHeight+(n.extraHeight||0);o.canvas.width=t,o.canvas.height=e,o.projection.translate([t/2,e/2])};return function(n){o=n,n.onInit(function(){t=!0,d3.select(window).on("resize",function(){t=!0})}),n.onDraw(function(){t&&(e(),t=!1)})}}function t(n){return n=n||{},function(t){t.onInit(function(){var o=window.innerWidth+(n.extraWidth||0),e=window.innerHeight+(n.extraHeight||0);i=o,l=e,t.projection.scale(Math.min(o,e)/2)})}}function o(n){return function(t){var o=null,e=!1;t.plugins.autorotate={pause:function(){e=!0},resume:function(){e=!1}},t.onDraw(function(){if(e||!o)o=new Date;else{var r=new Date,a=r-o,i=t.projection.rotate();i[0]+=n*a/1e3,i[0]>=180&&(i[0]-=360),t.projection.rotate(i),o=r}})}}function e(){return function(){var n=[],t="http://10.14.85.116/nodejs_project/micaps/data/micaps/14/15071014.024.json",t="http://10.14.85.116/nodejs_project/micaps/data/micaps/14/rr012608/rr012608.048.json";a.onInit(function(){d3.json(t,function(t,o){console.log(o),n=[];for(var e=0,r=o.areas,a=r.length;a>e;e++){for(var i=r[e],l=i.items,u=[],s=0,c=l.length;c>s;s++){var p=l[s];u.push([p.x,p.y])}var f=u[u.length-1],g=u[0];(f[0]!=g[0]||f[1]!=g[1])&&u.push(g),n.push({type:"Feature",geometry:{type:"Polygon",coordinates:[u]},properties:{color:getColor(parseFloat(i.symbols.text),i.code)}})}console.log("data_loaded",n)})}),a.onDraw(function(){for(var t=0,o=n.length;o>t;t++)a.withSavedContext(function(o){var e=n[t];o.beginPath(),a.path.context(o)(e),o.fillStyle=e.properties.color||"rgba(0, 255, 0, 0.3)",o.fill(),o.strokeStyle="rgba(255, 255, 255, 0.3)",o.stroke()})})}}function e(){function n(n){var t=n.length;if(t>0){for(var o=0,e=0,r=t-1;r>e;e++){var a=n[e],i=n[e+1];o+=a.x*i.y-i.x*a.y}var a=n[r],i=n[0];return o+=a.x*i.y-i.x*a.y,o/2}return 0}return function(){var t=[],o="./data/1.json";a.onInit(function(){d3.json(o,function(o,e){e.areas.forEach(function(o){var e=[];n(o.items)>0&&o.items.reverse(),o.items.forEach(function(n){e.push([n.x,n.y])}),t.push({type:"Feature",geometry:{type:"Polygon",coordinates:[e]},properties:{color:o.c}})})})}),a.onDraw(function(){for(var n=0,o=t.length;o>n;n++)a.withSavedContext(function(o){var e=t[n];o.beginPath(),a.path.context(o)(e),o.fillStyle=e.properties.color||"rgba(0, 255, 0, 0.3)",o.fill(),o.strokeStyle="rgba(255, 255, 255, 0.3)",o.stroke()})})}}var r=document.getElementById("quakeCanvas"),a=planetaryjs.planet();window.planet=a,a.loadPlugin(n({})),a.loadPlugin(t({})),a.loadPlugin(planetaryjs.plugins.earth({topojson:{file:"./world-110m.json"},oceans:{fill:"#001320"},land:{fill:"#06304e"},borders:{stroke:"#001320"}})),a.loadPlugin(planetaryjs.plugins.pings()),a.loadPlugin(planetaryjs.plugins.zoom({scaleExtent:[50,5e3]})),a.loadPlugin(planetaryjs.plugins.drag({onDragStart:function(){this.plugins.autorotate.pause()},onDragEnd:function(){this.plugins.autorotate.resume()}})),a.loadPlugin(e()),a.loadPlugin(o(5)),a.projection.rotate([-100,-30,-5]),a.draw(r);var i,l}();