<!DOCTYPE html> 
<html> 
<head> 
    <title>Leaflet Quick Start Guide Example</title> 
    <meta charset="utf-8" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
       
    <!-- 引用 --> 
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.css" /> 
    <script src="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.js"></script> 
       
    <!-- 引用本地 --> 
    <!-- <link rel="stylesheet" href="debug/leaflet.css" /> 
    <script type="text/javascript" src="debug/deps.js"></script> 
    <script src="debug/leaflet-include.js"></script> --> 
       
    <script> 
        window.onload=function(){ 
            //初始化地图控件 
            //var map = L.map('map').setView([51.505, -0.09], 13); 
            var map = L.map('map', {center: [39.929, 116.388],zoom: 5}); 
            //添加图层 
            L.tileLayer('http://api.tiles.mapbox.com/v4/ludawei.mj8ienmm/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibHVkYXdlaSIsImEiOiJldzV1SVIwIn0.-gaUYss5MkQMyem_IOskdA', { 
                maxZoom: 18, 
                // attribution: 'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>' 
            }).addTo(map);
            var conf = {
  "status": "ok", 
  "radar_img": [
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130617.png", 
      1436739445.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130630.png", 
      1436740215.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130642.png", 
      1436740937.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130652.png", 
      1436741541.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130706.png", 
      1436742381.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130717.png", 
      1436743041.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130730.png", 
      1436743846.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130742.png", 
      1436744539.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130752.png", 
      1436745135.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130806.png", 
      1436745991.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130817.png", 
      1436746642.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130841.png", 
      1436748116.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130852.png", 
      1436748743.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130906.png", 
      1436749601.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130917.png", 
      1436750225.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130930.png", 
      1436751027.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130941.png", 
      1436751693.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507130952.png", 
      1436752339.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507131007.png", 
      1436753233.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ], 
    [
      "http://caiyunapp.com/res/storm_radar/radar_CN01_nmc_fast/201507131017.png", 
      1436753824.0, 
      [
        3.9584302557704305, 
        71.9870452481536, 
        57.85736974422957, 
        134.8067547518464
      ]
    ]
  ]
};

            var list = conf.radar_img;
            var imageOverlays = [];
            var currentIndex = 0;
            var imageBounds = [[3.9584302557704305, 71.9870452481536], [57.85736974422957, 134.8067547518464]];
            for(var i = 0, j = list.length; i<j; i++){
            	var item = list[i];
            	var imageUrl = item[0];
            	var overlay = L.imageOverlay(imageUrl, imageBounds);
            	overlay.addTo(map);
            	overlay.setOpacity(i == 0? 1: 0);
            	imageOverlays.push(overlay);
            }
            
            function run(){
            	imageOverlays[currentIndex].setOpacity(0);
            	var next = currentIndex + 1 < imageOverlays.length-1? 1+currentIndex: 0;
            	imageOverlays[next].setOpacity(1);
            	currentIndex = next;
            	setTimeout(run, 200)
            }
            run();
            //添加点标记 
            // L.marker([51.5, -0.09]).addTo(map).bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup(); 
            // //添加circle 
            // L.circle([51.508, -0.11], 500, { 
            //     color: 'red', 
            //     fillColor: '#f03', 
            //     fillOpacity: 0.5 
            // }).addTo(map).bindPopup("I am a circle."); 
            // //添加polygon 
            // L.polygon([ 
            //     [51.509, -0.08], 
            //     [51.503, -0.06], 
            //     [51.51, -0.047] 
            // ]).addTo(map).bindPopup("I am a polygon."); 
            //给地图点击添加弹窗事件 
            var popup = L.popup(); 
            function onMapClick(e) { 
                popup 
                    .setLatLng(e.latlng) 
                    .setContent("You clicked the map at " + e.latlng.toString()) 
                    .openOn(map); 
            } 
            map.on('click', onMapClick); 
        }; 
    </script> 
</head> 
<body> 
    <div id="map" style="width: 1500px; height: 900px"></div> 
</body> 
</html>